<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>AG Search</title>
  <style>
    body {
      font-family: Arial;
      padding: 10px;
      background: #f0f0f0;
      color: #000;
      margin: 0;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
    }
    .search-container {
      padding: 10px;
      background: #fff;
      border: 1px solid #000;
    }
    h2 {
      font-size: 18px;
      text-align: center;
      margin-bottom: 10px;
    }
    .search-box {
      margin-bottom: 10px;
    }
    input[type="text"] {
      width: 100%;
      padding: 5px;
      font-size: 12px;
      border: 1px solid #000;
    }
    button {
      padding: 5px 10px;
      font-size: 12px;
      border: 1px solid #000;
      background: #00f;
      color: #fff;
      cursor: pointer;
    }
    .results-box {
      padding: 10px;
      border: 1px solid #000;
      background: #fff;
      font-size: 12px;
    }
    .result-item {
      margin-bottom: 10px;
      padding: 5px;
      border-bottom: 1px solid #ccc;
    }
    .result-item a {
      color: #00f;
      font-weight: bold;
    }
    .disclaimer {
      text-align: center;
      font-size: 10px;
      margin-top: 10px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="search-container">
      <h2>AG Search</h2>
      <div class="search-box">
        <input type="text" id="search-input" onkeydown="if(event.keyCode==13) search();" placeholder="Запрос">
        <button onclick="search()">Поиск</button>
      </div>
      <div class="results-box" id="results-box"></div>
      <div class="disclaimer">Поиск по индексу сайтов</div>
      <div class="disclaimer">Спасибо: ShalunBalun43, UnfineDarvin, SALUTYT, peretZ</div>
    </div>
  </div>

  <!-- Подключение siteIndex.js -->
  <script src="siteIndex.js"></script>
  <script>
    function search() {
      var input = document.getElementById('search-input');
      var resultsBox = document.getElementById('results-box');
      var query = input.value.toLowerCase().replace(/^\s+|\s+$/g, '');
      resultsBox.innerHTML = '<div class="result-item">Загрузка...</div>';

      if (!query) {
        resultsBox.innerHTML = '<div class="result-item">Введите запрос</div>';
        return;
      }

      // Проверка на существование siteIndex
      if (typeof siteIndex == 'undefined' || !siteIndex) {
        resultsBox.innerHTML = '<div class="result-item">Ошибка: база не загружена</div>';
        return;
      }

      var results = '';
      for (var i = 0; i < siteIndex.length; i++) {
        var site = siteIndex[i];
        var title = site.title.toLowerCase();
        var desc = site.description.toLowerCase();

        // Поиск только по title и description
        if (title.indexOf(query) != -1 || desc.indexOf(query) != -1) {
          results += '<div class="result-item">' +
                     '<a href="' + site.url + '" target="_blank">' + site.title + '</a>' +
                     '<p>' + site.description + '</p>' +
                     '</div>';
        }
      }

      if (!results) {
        resultsBox.innerHTML = '<div class="result-item">Ничего не найдено</div>';
      } else {
        resultsBox.innerHTML = results;
      }
    }
  </script>
</body>
</html>




